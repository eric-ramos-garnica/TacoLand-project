{% extends 'base.html'%}

{% block title %}Profile{% endblock %}

{% block head %}

{% endblock %}

<!-- body -->
{% block body %}
<!-- image -->
{% if not user_info.user_image%}
<br>
    <div id="container-user-image">
        <form action="/userProfileEdit" method="POST" enctype="multipart/form-data">

            <label for="user-image" ><i class="fa-solid fa-user fa-2xl"></i></label><br>
            <input type="file" name="my-file" id="user-image" style="display: none;" required>
            <button id="add-image-button">Add image</button>
            <button id="user-image-button-submit" style="display: none;" type="submit">submit</button>
            <button id="cancel-edit-img" style="display: none;">cancel</button>
        </form>
        
    </div>
    <!-- script -->
    <script>
        const add_image_button = document.getElementById('add-image-button')
      
        // add photo
        add_image_button. addEventListener('click',(e)=>{
            
            e.preventDefault();
            document.getElementById('user-image').removeAttribute('style');
            e.target.setAttribute("style","display:none;")
            document.getElementById("user-image-button-submit").removeAttribute('style');
            document.getElementById("cancel-edit-img").removeAttribute('style')
        });
        cancel_button = document.getElementById("cancel-edit-img");
        cancel_button.addEventListener('click',(e)=>{
            document.getElementById("user-image").setAttribute('style','display:none;')
            document.getElementById("add-image-button").removeAttribute('style')
            document.getElementById('user-image-button-submit').setAttribute('style','display:none;');
            e.preventDefault()
            e.target.setAttribute('style', 'display:none;')
        });

    </script> 
{% else %}
    <img src="{{user_info.user_image}}" alt="user-image">
    <div id="container-user-image">
        <form action="/userProfileEdit" method="POST" enctype="multipart/form-data">
            <input type="file" name="my-file" id="user-image" style="display: none;" required>
            <button id="add-image-button">Edit photo</button>
            <button id="user-image-button-submit" style="display: none;" type="submit">submit</button>
            <button id="cancel-edit-img" style="display: none;">cancel</button>
        </form>
    </div>

    <script>

        const edit_button_image = document.getElementById("add-image-button")
        edit_button_image.addEventListener('click',(e)=>{
            e.preventDefault()
            document.getElementById("user-image").removeAttribute('style');
            document.getElementById("user-image-button-submit").removeAttribute('style');
            document.getElementById("add-image-button").setAttribute('style', 'display:none;');
            document.getElementById("cancel-edit-img").removeAttribute('style')
        });


        const cancel_button_img = document.getElementById('cancel-edit-img');
        cancel_button_img.addEventListener('click',(e)=>{
            
            e.preventDefault()
            document.getElementById('user-image').setAttribute('style','display:none;');
            e.target.setAttribute('style','display:none;');
            document.getElementById('user-image-button-submit').setAttribute('style','display:none;');
            document.getElementById("add-image-button").removeAttribute('style');

        });
    </script>
{%endif%}
    <!-- NAME INFO -->
    <div>
        <p id="first-last-name">Name:{{user_info.fname}} {{user_info.lname}} <span><button id="edit-button-name">Edit</button></span></p>
        <form action="/userProfileEdit" method="POST" style="display: none;" id="edit-form-name">
            <label for="fname">First:</label>
            <input type="text" name="name" id="fname" required>
            <label for="lname">Last:</label>
            <input type="text" name="lastname" id="lname"required>
            <button type="submit" id="submit-button-name" >Submit</button>
            <button id="cancel-edit-name" style="display: none;">cancel</button>
        </form>
    </div>
    <script>
        edit_button_name = document.getElementById("edit-button-name")
        edit_button_name.addEventListener('click',(e)=>{
            e.target.setAttribute('style','display:none;');
            document.getElementById("edit-form-name").removeAttribute('style');
            document.getElementById("first-last-name").setAttribute('style','display:none;');
            document.getElementById("cancel-edit-name").removeAttribute("style");
        });
    
        cancel_button_name = document.getElementById("cancel-edit-name")
        cancel_button_name.addEventListener('click',(e)=>{
            document.getElementById("first-last-name").removeAttribute('style');
            document.getElementById("edit-form-name").setAttribute('style','display: none;');
            e.preventDefault();
            e.target.setAttribute('style','display: none;');
            edit_button_name.removeAttribute("style");
        });
    </script>
    <!-- email -->
    <p>Email:{{user_info.email}}</p>
<!-- phone  -->
{% if not user_info.phone %}
    <form action="/userProfileEdit" method="POST">
        <label for="user-phone" >Phone:</label>
        <input type="text" name="user-phone-value" id="user-phone" disabled="disabled" required>
        <button id="add-phone-button">Add phone</button>
        <button id="user-phone-button-submit" style="display: none;" type="submit">submit</button>
        <button id="cancel-edit" style="display: none">cancel</button>
    </form>
    <script>
        const add_phone_button = document.getElementById('add-phone-button')
        add_phone_button.addEventListener('click',(e)=>{
        e.preventDefault();
        document.getElementById('user-phone').removeAttribute('disabled');
        e.target.setAttribute("style","display:none;")
        document.getElementById("user-phone-button-submit").removeAttribute('style');
        document.getElementById("cancel-edit").removeAttribute('style')     
    });

    const cancel_button_image = document.getElementById('cancel-edit');
    cancel_button_image.addEventListener('click',(e)=>{
        e.preventDefault()
            document.getElementById('user-phone').setAttribute('disabled', "disabled");
            document.getElementById('user-phone-button-submit').setAttribute('style','display:none;')
            e.target.setAttribute('style','display:none;')
            document.getElementById('add-phone-button').removeAttribute('style')
        });

    </script>

    </script>

{% else %}
    <p id="user-phone-edit">Phone:{{user_info.phone}}<span><button id="edit-button-phone">edit</button></span></p>
    <form action="/userProfileEdit" method="POST" id="user-form-phone" style="display: none;" >
        <label for="user-phone-edit" >Phone:</label>
        <input type="text" name="user-phone-value" id="user-phone-edit" required>
        <button type="submit">submit</button>
        <span><button id="cancel-edit" style="display: none">cancel</button></span>
    </form>
    
    <!-- script -->
    <script>
        const edit_phone_button = document.getElementById('edit-button-phone');
        edit_phone_button.addEventListener('click',(e)=>{
            document.getElementById('user-phone-edit').setAttribute('style','display: none;');
            document.getElementById('user-form-phone').removeAttribute('style');
            document.getElementById('cancel-edit').removeAttribute('style');
        });

        const cancel_button = document.getElementById('cancel-edit');
        cancel_button.addEventListener('click',(e)=>{
            document.getElementById('user-form-phone').setAttribute('style','display: none;')
            document.getElementById('user-phone-edit').removeAttribute('style')
            e.preventDefault()
            e.target.setAttribute('style','display: none;')
        });

    </script>
{% endif %}
<!-- gender -->
{% if not user_info.gender %}
<form action="/userProfileEdit" method="POST">
    <label for="gender">Gender:</label>
    <input type="text" name="gender-value" id="gender" disabled="disabled" required>
    <button id="add-gender-button">Add gender</button>
    <button id="user-gender-button-submit" style="display: none;" type="submit">submit</button>
    <span><button id="cancel-edit-gender" style="display: none">cancel</button></span>
</form>
<!-- script -->
<script>
    const addGenderBtn = document.getElementById("add-gender-button");
    addGenderBtn.addEventListener("click", function(e) {
        e.preventDefault()
        document.getElementById("gender").removeAttribute('disabled');
        e.target.setAttribute("style","display:none;")
        document.getElementById("user-gender-button-submit").removeAttribute('style');
        document.getElementById("cancel-edit-gender").removeAttribute('style')  
    });

    const cancel_button_genders = document.getElementById("cancel-edit-gender")
    cancel_button_genders.addEventListener('click',(e)=>{
        e.preventDefault()
        document.getElementById('gender').setAttribute('disabled', "disabled");
        e.target.setAttribute('style','display:none');
        document.getElementById("add-gender-button").removeAttribute('style');
        document.getElementById("user-gender-button-submit").setAttribute('style','display:none;')

    });
    
</script>
{%else%}
    <p id="gender-element">Gender:{{user_info.gender}}<span><button id="edit-button-gender">edit</button></span></p>
    <form action="/userProfileEdit" method="POST" id="user-form-gender" style="display: none;">
        <label for="gender">Gender:</label>
        <input type="text" name="gender-value" id="gender" required >
        <button id="user-gender-button-submit"  type="submit">submit</button>
        <span><button id="cancel-edit-gender" style="display: none">cancel</button></span>
    </form>

    <!-- script -->
    <script>
        const edit_gender_button = document.getElementById("edit-button-gender");
        edit_gender_button.addEventListener('click',(e)=>{
            e.preventDefault()
            document.getElementById("user-form-gender").removeAttribute('style')
            document.getElementById("gender-element").setAttribute('style','display:none;')
            document.getElementById("cancel-edit-gender").removeAttribute('style')
        });
        const cancel_button_gender = document.getElementById("cancel-edit-gender")
        cancel_button_gender.addEventListener('click',(e)=>{
            document.getElementById("user-form-gender").setAttribute('style','display:none;')
            document.getElementById("gender-element").removeAttribute('style')
            e.preventDefault()
            e.target.setAttribute("style","display:none;")
        });

    </script>
{% endif %}
<!-- password -->
<div>
    <a href="/changePassword"><button>Change Password</button></a><br>
</div>
<!-- delete -->
<div>
    <a href="/deleteAccount"><button>Delete Account</button></a>
</div>
    
        

{% endblock %}