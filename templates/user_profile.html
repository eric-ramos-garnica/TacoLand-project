{% extends 'base.html'%}

{% block title %}Profile{% endblock %}

{% block head %}

{% endblock %}

<!-- body -->
{% block body %}

{% if not user_info.user_image%}
    <div class="container-profile">
        <br>
        <div id="container-user-image">
            <form action="/userProfileEdit" method="POST" enctype="multipart/form-data">

                <label for="user-image" ><i class="fa-solid fa-user fa-2xl"></i></label><br>
                <input type="file" name="my-file" id="user-image" style="display: none;" required>
                <button id="add-image-button">Add image</button>
                <button id="user-image-button-submit" style="display: none;" type="submit">submit</button>
            </form>
            
        </div>
    </div>
{% else %}
    <img src="{{user_info.user_image}}" alt="user-image">
    <div id="container-user-image">
        <form action="/userProfileEdit" method="POST" enctype="multipart/form-data">
            <input type="file" name="my-file" id="user-image" style="display: none;" required>
            <button id="add-image-button">Edit photo</button>
            <button id="user-image-button-submit" style="display: none;" type="submit">submit</button>
        </form>
    </div>
{%endif%}

    <p>Name:{{user_info.fname}} {{user_info.lname}}</p>
    <p>Email:{{user_info.email}}</p>

{% if not user_info.phone %}
    <form action="/userProfileEdit" method="POST">
        <label for="user-phone" >Phone:</label>
        <input type="text" name="user-phone-value" id="user-phone" disabled="disabled">
        <button id="add-phone-button">Add phone</button>
        <button id="user-phone-button-submit" style="display: none;" type="submit">submit</button>
    </form>
{% else %}
    <p id="user-phone-edit">Phone:{{user_info.phone}}<span><button id="edit-button-phone">edit</button></span></p>
    <form action="/userProfileEdit" method="POST" id="user-form-phone" style="display: none;" >
        <label for="user-phone-edit" >Phone:</label>
        <input type="text" name="user-phone-value" id="user-phone-edit">
        <button type="submit">submit</button>
        <button id="cancel-edit">cancel</button>
    </form>
    <!-- script -->
    <script>
        const edit_phone_button = document.getElementById('edit-button-phone');
        edit_phone_button.addEventListener('click',(e)=>{
            document.getElementById('user-phone-edit').setAttribute('style','display: none;');
            document.getElementById('user-form-phone').removeAttribute('style');
        });
        const cancel_button = document.getElementById('cancel-edit');
        cancel_button.addEventListener('click',(e)=>{
            document.getElementById('user-form-phone').setAttribute('style','display: none;')
            document.getElementById('user-phone-edit').removeAttribute('style')
        });

    </script>
{% endif %}

{% if not user_info.gender %}
<form action="/userProfileEdit" method="POST">
    <label for="gender">Gender:</label>
    <input type="text" name="gender-value" id="gender" disabled="disabled">
    <button id="add-gender-button">Add gender</button>
    <button id="user-gender-button-submit" style="display: none;" type="submit">submit</button>
</form>
<script>
    const addGenderBtn = document.getElementById("add-gender-button");
    const genderSubmitBtn = document.getElementById("user-gender-button-submit");

    addGenderBtn.addEventListener("click", function(e) {
        e.preventDefault()
        document.getElementById("gender").removeAttribute('disabled');
        e.target.setAttribute("style","display:none;")
        document.getElementById("user-gender-button-submit").removeAttribute('style');
      
    });
</script>
{%else%}
    <p>Gender:{{user_info.gender}}</p>
{% endif %}

<a href="#"><button>Change Password</button></a>
    
            



<script>
    const add_image_button = document.getElementById('add-image-button')
    const add_phone_button = document.getElementById('add-phone-button');
  
    // add photo
    add_image_button. addEventListener('click',(e)=>{
        
        e.preventDefault();
        document.getElementById('user-image').removeAttribute('style');
        e.target.setAttribute("style","display:none;")
        document.getElementById("user-image-button-submit").removeAttribute('style');
       
    });
    //add phone
    add_phone_button.addEventListener('click',(e)=>{
        
        e.preventDefault();
        document.getElementById('user-phone').removeAttribute('disabled');
        e.target.setAttribute("style","display:none;")
        document.getElementById("user-phone-button-submit").removeAttribute('style');
    });


</script> 

{% endblock %}